#!/bin/sh
. "$LUNA_COLOR_PATH/colors.sh"
export XSECURELOCK_AUTH_BACKGROUND_COLOR="$background"
export XSECURELOCK_AUTH_FOREGROUND_COLOR="$foreground"
export XSECURELOCK_PASSWORD_PROMPT="time"
export XSECURELOCK_SAVER="saver_mpv"
export XSECURELOCK_SHOW_DATETIME=1
export XSECURELOCK_NO_COMPOSITE=1 # till picom is supported
export XSECURELOCK_FONT="Fira Code"
export XSECURELOCK_LIST_VIDEOS_COMMAND="find $LUNA_WALL_DIR/LockVid -type f"


[ "$1" = "--force" ] && xsecurelock && exit
playerctl -l | xargs -I{} playerctl status -p '{}' | grep -q 'Playing' || xsecurelock
