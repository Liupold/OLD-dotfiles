#!/bin/sh

[ "$LUNA_AUTO_PAUSE" -eq 0 ] && exit

pactl subscribe | while read -r event; do
        [ "${event#*\'change\' on card}" != "$event" ] &&
                sinks="$(pactl list sinks)" &&
                [ "${sinks#*Active Port:*-speaker}" != "$sinks" ] && \
                timeout 0.5 playerctl -a pause
done
